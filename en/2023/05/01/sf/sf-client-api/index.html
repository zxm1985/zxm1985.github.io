<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/en/images/logo.svg" color="#222">

<link rel="stylesheet" href="/en/css/main.css">


<link rel="stylesheet" href="/en/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.52czy.net","root":"/en/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Describes the api object in the client and exposes the functions used by the client for development.">
<meta property="og:type" content="article">
<meta property="og:title" content="Client interface api object">
<meta property="og:url" content="https://blog.52czy.net/en/2023/05/01/sf/sf-client-api/index.html">
<meta property="og:site_name" content="WanJianGuiXin">
<meta property="og:description" content="Describes the api object in the client and exposes the functions used by the client for development.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-05-01T08:53:14.000Z">
<meta property="article:modified_time" content="2024-02-02T09:04:59.716Z">
<meta property="article:author" content="LiXiaoYao">
<meta property="article:tag" content="Accessibility">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.52czy.net/en/2023/05/01/sf/sf-client-api/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Client interface api object | WanJianGuiXin</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/en/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WanJianGuiXin</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">fairy island</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-switch-to-chinese">

    <a href="/en/../" rel="section"><i class="fa fa-home fa-fw"></i>Switch to Chinese</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/en/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/en/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.52czy.net/en/2023/05/01/sf/sf-client-api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/en/images/avatar.gif">
      <meta itemprop="name" content="LiXiaoYao">
      <meta itemprop="description" content="In the past, I was too busy to summarize. Now I am standing at a different height, leaving a memory of the Internet for my future self.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WanJianGuiXin">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Client interface api object
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-05-01 16:53:14" itemprop="dateCreated datePublished" datetime="2023-05-01T16:53:14+08:00">2023-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-02-02 17:04:59" itemprop="dateModified" datetime="2024-02-02T17:04:59+08:00">2024-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/en/categories/SF-Development/" itemprop="url" rel="index"><span itemprop="name">SF Development</span></a>
                </span>
            </span>

          
            <div class="post-description">Describes the api object in the client and exposes the functions used by the client for development. </div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="api-control-interface-obtained-from-the-sf-start-parameter-of-the-client-entry-module-ClientMain-lua"><a href="#api-control-interface-obtained-from-the-sf-start-parameter-of-the-client-entry-module-ClientMain-lua" class="headerlink" title="api control interface, obtained from the sf_start parameter of the client entry module ClientMain.lua"></a>api control interface, obtained from the sf_start parameter of the client entry module ClientMain.lua</h2><ol>
<li>api.Constants.*** Required constant-on table, such as keyboard code and touch type TOUCH_*, please check the constant-on description file [Constants] for details</li>
<li>Audio engine, more functions can be added upon request<ol>
<li>api.playOnce(path,cb) -&gt; Play the sound effect once, path: the relative path of the audio event, no extension is required. Finally, the audio directory needs to be packaged into dat format through the project. cb -&gt; callback method, this method will be called back after each playback is completed</li>
<li>api.playOnce(path,pan) -&gt; Play the sound effect once, path: the relative path of the audio event, no extension is required, and finally the audio directory needs to be packaged into dat format through the project. pan -&gt; 2d panning position, from -1.0 to 1.0, from left channel to right channel.</li>
<li>api.playOwn(name,path) -&gt; Play the audio and give the audio a name. You can then control the audio through the name. Audio with the same name is mutually exclusive. For example, playback will interrupt the previous sound.</li>
<li>api.playWithPosition(path,x,y,z) -&gt; Play the sound effect once, according to the position, path: the relative path of the audio event, no extension is needed, and finally the audio directory needs to be packaged into dat format through the project. x, y, z coordinates of the audio sound source in the 3D environment, accurate to the decimal point. x left and right, y up and down, z front and back.</li>
<li>api.stopAudio(name) -&gt; Stop audio, but do not release it in memory.</li>
<li>api.releaseAudio(name) -&gt; Stop and release audio</li>
<li>api.getGain(name) -&gt; Get the audio volume, parameter name-&gt; Get the name of the audio volume, return value volume, 0.0 to 1.0.</li>
<li>api.setGain(name,g) -&gt; Set the audio volume, name is the name of the sound effect, and is the first parameter of playOwn; g -&gt; Volume, 0.0 to 1.0.</li>
<li>api.getPitch(name) -&gt; Get the audio pitch, parameter name-&gt; audio name, return value audio pitch, 1.0 is normal, the value range is 0 ~ 100</li>
<li>api.setPitch(name,p) -&gt; Set the audio frequency, name is the name of the sound effect; p -&gt; Set the pitch, the value range is 0 ~ 100</li>
<li>api.setPan(name,p) -&gt; Set the left and right panning of the audio, name is the name of the sound effect; p 2d panning position, from -1.0 to 1.0, from the left channel to the right channel.</li>
<li>api.setPosition(name,pos) -&gt; Set the sound source coordinates of the 3D sound effect in the 3D environment, name is the name of the sound effect; pos coordinate table, for example {x&#x3D;1.3,y&#x3D;0,z&#x3D;8.32}</li>
<li>api.getTimeline(name) -&gt; Get the current playback timeline, parameter name-&gt; audio name, return value current timeline, millisecond unit.</li>
<li>api.setTimeline(name,t) -&gt; Set the current audio timeline, name is the name of the sound effect; t -&gt; Timeline, in milliseconds.</li>
<li>api.getPaused(name) -&gt; Get whether the audio playback is paused. The return value true indicates that the audio is currently paused. The audio must be in the playing state to determine whether it is paused. For the audio playback status, refer to 13.</li>
<li>api.setPaused(name,p) -&gt; Set audio pause. name &gt; audio name, p is true to pause, false is to continue playing.</li>
<li>api.getPlayState(name) -&gt; Get the audio playback status, name &gt; audio name, return value, audio playback status: as follows:<br>0 -&gt; Now playing<br>1 -&gt; The timeline cursor is paused on a sustain point. Advanced function, pause is located at a time point you specify.<br>2 -&gt; Stop playing.<br>3 -&gt; Loaded into memory, initializing, ready to play.<br>4 -&gt; Preparing to stop playback.</li>
<li>api.getProperty(name,flag) -&gt; Get the audio built-in properties, name&gt; audio name; flag &gt; the type of built-in properties to be obtained, refer to 15.</li>
<li>api.setProperty(name,flag,value) -&gt; Set the audio built-in properties, name&gt;Audio name; flag&gt;Please refer to the following for the types of built-in properties to be obtained; value&gt;The specific value of the built-in properties<br>0 -&gt; Audio priority, default -1, value range -1~256, the higher the priority, it will not become virtual audio<br>1 -&gt; Plan delay in DSP clock units, default value is -1. Range: -1, [0, inf) Default: -1<br>2 -&gt; Plan to look forward on the timeline in units of DSP clocks, default is -1. Range: -1, [0, inf) Default: -1<br>3 -&gt; Override the event’s 3D minimum distance, or -1 for default.Range: -1, [0, inf) Default: -1 Units: Distance units<br>4 -&gt; Override the event’s 3D maximum distance, or -1 for default.Range: -1, [0, inf) Default: -1 Units: Distance units<br>5 -&gt; Cooldown time, Override the event’s cooldown, or -1 for default.Range: -1, [0, inf) Default: -1<br>6 -&gt; The maximum number of event attribute types at the same time.</li>
<li>api.setListenerPosition(pos) -&gt; Set the coordinates of the listener in the 3D environment; pos coordinate table, for example {x&#x3D;1.3,y&#x3D;0,z&#x3D;8.32}</li>
<li>api.setListenerVelocity(vel) -&gt; Set the propagation speed of the listener’s sound in the 3D environment. The default is {x&#x3D;0, y&#x3D;0, z&#x3D;0}. This parameter controls the sound waves heard by the listener in the environment. Doppler effect, no Doppler effect by default</li>
<li>api.setListenerForward(f) -&gt; Set the facing direction of the listener; f is the coordinate table of the facing direction, for example, facing to the left {x&#x3D;-1,y&#x3D;0,z&#x3D;0}</li>
<li>api.setListenerUp(up) -&gt; Set the listener’s deviation; up deviation coordinate table, for example: {x&#x3D;0,y&#x3D;0.5,z&#x3D;0}</li>
<li>api.getListenerPosition() -&gt; Get the coordinates of the listener in the 3D environment; return the listener coordinates coordinate table, for example {x&#x3D;1.3,y&#x3D;0,z&#x3D;8.32}</li>
<li>api.getListenerVelocity() -&gt; Get the listener’s velocity in 3D. return Returns the listener speed table</li>
<li>getListenerForward() -&gt; Get the direction of the listener in 3D. return returns the listener facing the table</li>
<li>api.getListenerUp() -&gt; Get the listener’s deviation in 3D. return Returns the audience deviation table</li>
<li>api.getParameter(name,key) -&gt; Get the parameters of the event strength discussed with the sound effect engineer, name is the name of the sound effect strength to be obtained, key parameter name<br> 28 api.setParameter(name,key,value) -&gt; Set the parameter variables in the sound effect engine and defined by the sound effect engineer, name is the sound effect strength name; key is the parameter name; value is the parameter value, type number</li>
<li>api.setParameterLabel(name,key,label) -&gt; Set the enumeration parameter variable in the sound effect engine and defined by the sound effect engineer, name is the name of the sound effect strength; key is the parameter name; label is the string enumeration name, type string</li>
</ol>
</li>
<li>Voice library engine<ol>
<li>api.speak(text,appended) -&gt; Offline TTS reading, text reading text UTF8, whether appended needs to be queued for reading, the default parameter is omitted to interrupt the reading</li>
<li>api.speakOnline(text,appended) -&gt; Online TTS reading, text reading text UTF8, whether appended needs to be queued for reading, the default parameter is omitted to interrupt the reading, the reading will not interrupt the local offline TTS, generally used for notification class reading .</li>
</ol>
</li>
<li>Transmission engine<ol>
<li>api.send(t) -&gt; Send data to the server t is lua table</li>
</ol>
</li>
<li>Timer<ol>
<li>api.addTimer(ms,cb) -&gt; Add timer, parameter ms milliseconds, cb callback function, the callback method returns true and the timer continues, returns false and the timer ends, return returns the method to cancel the current timer</li>
<li>api.time() -&gt; Get the return value as a decimal in seconds, accurate to milliseconds</li>
</ol>
</li>
<li>Controlling the microphone cannot be used in global games.<ol>
<li>api.muteMic(b) -&gt; if b is true, the microphone is muted, and if false, the microphone is unmuted.</li>
<li>api.isMuteMic() -&gt; return returns whether the microphone is muted, true means muted.</li>
</ol>
</li>
<li>Modify touch mode<ol>
<li>api.selectGestureMode(mode) -&gt; Parameter mode, 1 normal mode, full screen touch, 2 upper and lower split screen mode, at this time the touches on both sides will not interfere with each other and can respond.</li>
<li>Event response. After selecting split-screen mode, there is one more parameter in all touch event response methods. After fingers, it is gid. A gid of 200 means it is in the upper half of the screen. A gid of 300 means it is in the lower half of the screen. When in full screen touch mode gid is 100.</li>
</ol>
</li>
<li>Other functions<ol>
<li>api.copy(appended) -&gt; Copy the content just read aloud using tts, appended is true to indicate additional copy</li>
<li>api.vibrate(index,low,high,ms) -&gt; vibrate the game controller, index: the index ID of the controller handle; low: the vibration rate of the dropper bottle, high: the vibration rate of the high-level vibration, the rate is from Starting from 0 to 0xFFFF is the maximum; ms: the duration of vibration, in milliseconds.</li>
<li>api.moveMouse(x,y) -&gt; Move the mouse pointer to the heart position.</li>
</ol>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/en/tags/Accessibility/" rel="tag"># Accessibility</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/en/2023/05/01/sf/sf-server-api/" rel="prev" title="Server interface api object">
      <i class="fa fa-chevron-left"></i> Server interface api object
    </a></div>
      <div class="post-nav-item">
    <a href="/en/2023/05/01/sf/sf-client-constants/" rel="next" title="Client Constants constant light table">
      Client Constants constant light table <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#api-control-interface-obtained-from-the-sf-start-parameter-of-the-client-entry-module-ClientMain-lua"><span class="nav-number">1.</span> <span class="nav-text">api control interface, obtained from the sf_start parameter of the client entry module ClientMain.lua</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LiXiaoYao</p>
  <div class="site-description" itemprop="description">In the past, I was too busy to summarize. Now I am standing at a different height, leaving a memory of the Internet for my future self.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/en/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/en/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/en/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiXiaoYao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/en/lib/anime.min.js"></script>
  <script src="/en/lib/velocity/velocity.min.js"></script>
  <script src="/en/lib/velocity/velocity.ui.min.js"></script>

<script src="/en/js/utils.js"></script>

<script src="/en/js/motion.js"></script>


<script src="/en/js/schemes/muse.js"></script>


<script src="/en/js/next-boot.js"></script>




  















  

  

</body>
</html>
